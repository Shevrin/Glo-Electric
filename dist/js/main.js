(()=>{"use strict";const e=({timing:e,draw:t,duration:l})=>{let o=performance.now();requestAnimationFrame((function r(s){let c=(s-o)/l;c>1&&(c=1);let n=e(c);t(n),c<1&&requestAnimationFrame(r)}))},t=(e,t=e,l="start")=>{t.addEventListener("click",(t=>{if(t.preventDefault(),e.getAttribute("href")){const t=e.getAttribute("href");document.querySelector(e.getAttribute("href")+t).scrollIntoView({behavior:"smooth",block:"start"})}else e.scrollIntoView({behavior:"smooth",block:l})}))};(()=>{const t=document.querySelectorAll(".callback-btn"),l=document.querySelector(".button-services"),o=document.querySelector(".services-elements").querySelectorAll(".element"),r=document.querySelector(".modal-overlay"),s=document.getElementById("callback"),c=s.querySelector("form"),n=c.querySelectorAll(".form-control"),a=document.querySelector('input[name="tel"]'),i=document.querySelector("body"),d=document.createElement("div"),u=t=>{t.preventDefault(),r.style.display="block",s.style.display="block",r.style.opacity=0,s.style.opacity=0,e({duration:130,timing:e=>e,draw(e){r.style.opacity=0+e,s.style.opacity=0+e}})};t.forEach((e=>e.addEventListener("click",u))),l.addEventListener("click",u),o.forEach((e=>e.addEventListener("click",u))),i.addEventListener("click",(t=>{t.preventDefault(),("modal-overlay"===t.target.className||t.target.closest(".modal-close"))&&(n.forEach((e=>{e.value="",e.classList.remove("error"),e.classList.remove("success"),d.innerHTML=""})),e({duration:130,timing:e=>e,draw(e){Math.floor(10*s.style.opacity)>0?(s.style.opacity=1-e,r.style.opacity=1-e):(s.style.display="none",r.style.display="none")}})),t.target.classList.contains("feedback")&&a.classList.contains("success")&&(()=>{c.append(d);const e=new FormData(c),t={};var l;e.forEach(((e,l)=>{t[l]=e})),d.innerHTML="Идет отправка...",(l=t,fetch("../../server.php",{method:"POST",body:JSON.stringify(l),headers:{"Content-type":"application/json; charset=UTF-8"}}).then((e=>e.json()))).then((e=>{console.log(e),d.innerHTML="Отправлено"})).catch((e=>{console.log("err"),d.innerHTML="Ошибка!"})).finally((()=>{n.forEach((e=>{e.value="",e.classList.remove("error"),e.classList.remove("success")}))}))})()}))})(),(()=>{const e=document.querySelector(".up");e.style.display="none";const l=document.getElementById("scroll-1");window.addEventListener("scroll",(()=>{window.pageYOffset>500?e.style.display="block":e.style.display="none"})),e.addEventListener("click",t(l,e,"end"))})(),document.querySelector(".top-menu").querySelectorAll("ul>li>a").forEach((e=>t(e))),(()=>{const e=document.querySelectorAll('input[name="tel"]');let t=/^(\+7|7|8)?[\s\-]?\(?[489][0-9]{2}\)?[\s\-]?[0-9]{3}[\s\-]?[0-9]{2}[\s\-]?[0-9]{2}$/;e.forEach((e=>{e.addEventListener("change",(()=>{e.classList.remove("error"),t.test(e.value)||(e.classList.add("error"),e.value=""),t.test(e.value)&&e.classList.add("success")}))}))})(),document.querySelector(".services-elements").querySelectorAll(".element")})();